<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.market.scms.dao.SupermarketStaffDao">
    <select id="queryStaffByPhone" resultType="com.market.scms.entity.SupermarketStaff">
        SELECT 
        staff_id,staff_name,staff_password,staff_phone,create_time,last_edit_time,
        staff_position,staff_status
        FROM 
        tb_staff
        WHERE 
        staff_phone = #{staffPhone}
    </select>

    <select id="queryStaffList" resultType="com.market.scms.entity.SupermarketStaff">
        SELECT 
        staff_id,staff_name,staff_password,staff_phone,create_time,last_edit_time,
        staff_position,staff_status
        FROM 
        tb_staff 
        WHERE 
        staff_status != -1
        ORDER BY staff_Position ASC 
    </select>
    
    <insert id="insertStaff" parameterType="com.market.scms.entity.SupermarketStaff"
            useGeneratedKeys="true" keyProperty="staffId" keyColumn="staff_id">
        INSERT INTO
        tb_staff(staff_name,staff_password,staff_phone,create_time,last_edit_time,
        staff_position,staff_status)
        VALUES 
        (#{staffName},#{staffPassword},#{staffPhone},#{createTime},#{lastEditTime},
        #{staffPosition},#{staffStatus})
    </insert>
    
    <update id="updateStaff">
        UPDATE 
        tb_staff
        <set>
            <if test="staffPassword != null"> staff_password = #{staffPassword},</if>
            <if test="staffName != null"> staff_name = #{staffName},</if>
            <if test="staffPosition != null"> staff_position = #{staffPosition},</if>
            <if test="staffStatus != null"> staff_status = #{staffStatus},</if>
            <if test="lastEditTime != null"> last_edit_time = #{lastEditTime}</if>
        </set>
        WHERE 
        staff_id = #{staffId}
    </update>
    
    <select id="staffLogin" resultType="com.market.scms.entity.SupermarketStaff">
        SELECT 
        *
        FROM 
        db_staff
        WHERE 
        staff_phone = #{staffPhone}
        AND 
        staff_password = #{staffPassword}
    </select>
    
</mapper>